/*
 * Scala (https://www.scala-lang.org)
 *
 * Copyright EPFL and Lightbend, Inc. dba Akka
 *
 * Licensed under Apache License 2.0
 * (http://www.apache.org/licenses/LICENSE-2.0).
 *
 * See the NOTICE file distributed with this work for
 * additional information regarding copyright ownership.
 */

package scala.annotation

import scala.language.`2.13`

/** An annotation for methods whose bodies may be excluded
 *  from compiler-generated bytecode.
 *
 *  Annotate an `inline` method with `level` constant `0` (zero)
 *  to retain the method in byte code.
 *
 *  {{{
 *    type LogLevel = Int
 *    
 *    object LogLevel:
 *      inline val Info = 0
 *      inline val Warn = 1
 *      inline val Debug = 2
 *    
 *    inline val appLogLevel = LogLevel.Warn
 *    
 *    @elidable(0) // `log` method is retained in byte code
 *    inline def log(msg: String, inline level: LogLevel): Unit = 
 *      inline if (level <= appLogLevel) then println(msg)
 *    
 *    log("Warn log", LogLevel.Warn)
 *    
 *    log("Debug log", LogLevel. Debug)
 *  }}}
 *
 *  Migration note: this annotation had different semantics in Scala 2.
 */
final class elidable(final val level: Int) extends scala.annotation.ConstantAnnotation

/** Legacy constants, unused in Scala 3.
 */
object elidable {
  final val ALL     = Int.MinValue  // Level.ALL.intValue()
  final val FINEST  = 300           // Level.FINEST.intValue()
  final val FINER   = 400           // Level.FINER.intValue()
  final val FINE    = 500           // Level.FINE.intValue()
  final val CONFIG  = 700           // Level.CONFIG.intValue()
  final val INFO    = 800           // Level.INFO.intValue()
  final val WARNING = 900           // Level.WARNING.intValue()
  final val SEVERE  = 1000          // Level.SEVERE.intValue()
  final val OFF     = Int.MaxValue  // Level.OFF.intValue()

  final val MAXIMUM = OFF
  final val MINIMUM = ALL

  final val ASSERTION = 2000    // we should make this more granular

  val byName: Map[String, Int] = Map(
    "FINEST" -> FINEST,
    "FINER" -> FINER,
    "FINE" -> FINE,
    "CONFIG" -> CONFIG,
    "INFO" -> INFO,
    "WARNING" -> WARNING,
    "SEVERE" -> SEVERE,
    "ASSERTION" -> ASSERTION,
    "ALL" -> ALL,
    "OFF" -> OFF,
    "MAXIMUM" -> MAXIMUM,
    "MINIMUM" -> MINIMUM
  )
}
