---
title: E039: Forward Reference Extends Over Definition
kind: Error
---

# E039: Forward Reference Extends Over Definition

This error is emitted when a forward reference to a value extends over the definition of another value.

Forward references are allowed only if there are no value definitions between the reference and the definition that is referred to. Specifically, any statement between the reference and the definition cannot be a variable definition, and if it's a value definition, it must be lazy.

---

## Example

```scala sc:fail
def example = 
    def a: Int = b
    val b: Int = a
    a
```

### Error

```scala sc:nocompile
-- [E039] Reference Error: example.scala:2:10 
2 |    def a: Int = b
  |                 ^
  |               b is a forward reference extending over the definition of b
```

### Solution 

```scala sc:compile 
// Make the forward dependency lazy
// Warning: It still might fail at runtime
def example = 
    def a: Int = b
    lazy val b: Int = a
    a
``` 

```scala sc:compile 
// Even better ensure to always break the dependecny chain
def example =
  lazy val a: Int = if b == 0 then 1 else b
  lazy val b: Int = 0
  a
```


